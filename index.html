<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styles.css">
    <title>Reservation</title>
</head>
<body>
    <header>
        <nav>
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="user_cabinet.html">Personal Account</a></li> <!-- Link to User Account -->
                <li><a href="feedback.html">FeedBack</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <h1>Available Facilities for Booking</h1>
        <form id="filter-form">
            <label for="date">Date:</label>
            <input type="date" id="date" name="date" required>

            <label for="ticket-type">Type:</label>
            <select id="ticket-type" name="ticket-type">
                <option value="">All</option>
                <option value="room">Room</option>
                <option value="table">Table</option>
                <option value="ticket">Ticket</option>
            </select>

            <label for="price">Max Price:</label>
            <input type="number" id="price" name="price" placeholder="Enter max price" min="0">

            <button type="submit">Search</button>
        </form>

        <section class="facility-list" id="facility-list">
            <div class="facility-container">
                <!-- Facilities will be populated here dynamically -->
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Reservation System. All rights reserved.</p>
    </footer>

    <script>
        // Sample data for facilities
        const facilities = [
            { name: 'Hotel "Forest Glade"', description: 'Comfortable rooms near the forest with a view of the mountains.', price: 1200, type: 'room', image: 'images/forest_glade.jpg' },
            { name: 'Restaurant "Golden Lion"', description: 'Elegant restaurant with a wide selection of European cuisine.', price: 500, type: 'table', image: 'images/golden_lion.jpg' },
            { name: 'Event "Concert at the Stadium"', description: 'Musical concert of a popular band in the city center.', price: 300, type: 'ticket', image: 'images/concert_stadium.jpg' },
            { name: 'Hotel "Sunny Beach"', description: 'Rooms on the first line by the sea with a private beach.', price: 2000, type: 'room', image: 'images/sunny_beach.jpg' },
            { name: 'Restaurant "Eastern Cuisine"', description: 'Delicious dishes of Asian cuisine in a traditional style.', price: 600, type: 'table', image: 'images/eastern_cuisine.jpg' },
            { name: 'Hotel "Mountain View"', description: 'Luxury rooms with breathtaking mountain views.', price: 1500, type: 'room', image: 'images/mountain_view.jpg' },
            { name: 'Restaurant "Skyline"', description: 'Sky-high restaurant with panoramic views and gourmet meals.', price: 700, type: 'table', image: 'images/skyline.jpg' },
            { name: 'Event "Theater Performance"', description: 'An evening of cultural performances at the local theater.', price: 250, type: 'ticket', image: 'images/theater_performance.jpg' },
            { name: 'Hotel "Lakeside Retreat"', description: 'Peaceful retreat by the lake with cozy accommodations.', price: 1800, type: 'room', image: 'images/lakeside_retreat.jpg' },
            { name: 'Restaurant "Italian Delights"', description: 'Authentic Italian cuisine with fresh ingredients.', price: 550, type: 'table', image: 'images/italian_delights.jpg' },
            { name: 'Event "Art Exhibition"', description: 'Explore contemporary art at a local gallery.', price: 200, type: 'ticket', image: 'images/art_exhibition.jpg' }
        ];

        // Function to display facilities
        function displayFacilities(facilities) {
            const facilityContainer = document.getElementById('facility-list').querySelector('.facility-container');
            facilityContainer.innerHTML = ''; // Clear existing facilities

            facilities.forEach((facility, index) => {
                const div = document.createElement('div');
                div.className = 'facility-item';
                const safeIndex = index; // Unique index
                div.innerHTML = `
                        <img src="${facility.image}" alt="${facility.name}" class="facility-image">
                        <h2>${facility.name}</h2>
                        <p>${facility.description}</p>
                        <p>Price: <strong>${facility.price} uah</strong> (per person)</p>
                        <label for="num-people-${safeIndex}">Number of People:</label>
                        <input type="number" id="num-people-${safeIndex}" name="num-people" min="1" value="1" data-price="${facility.price}">
                        <p>Total Price: <strong id="total-price-${safeIndex}">${facility.price}</strong> uah</p>
                        <a class="btn-reserve" href="booking.html?facility=${encodeURIComponent(facility.name)}&price=${facility.price}&index=${safeIndex}">Reserve</a>
                    `;
                facilityContainer.appendChild(div);

                // Add event listener for number of people input
                const numPeopleInput = document.getElementById(`num-people-${safeIndex}`);
                const totalPriceElement = document.getElementById(`total-price-${safeIndex}`);

                numPeopleInput.addEventListener('input', function () {
                    const pricePerPerson = parseFloat(this.getAttribute('data-price'));
                    const numPeople = parseInt(this.value) || 1; // Default to 1 person
                    const totalPrice = pricePerPerson * numPeople;
                    totalPriceElement.textContent = totalPrice.toFixed(2);
                });
            });
        }

        // Filter function
        document.getElementById('filter-form').addEventListener('submit', function (e) {
            e.preventDefault(); // Prevent form submission
            const date = document.getElementById('date').value;
            const ticketType = document.getElementById('ticket-type').value;
            const maxPrice = document.getElementById('price').value;

            // Filter facilities based on user input
            const filteredFacilities = facilities.filter(facility => {
                const typeMatch = ticketType ? facility.type === ticketType : true;
                const priceMatch = maxPrice ? facility.price <= maxPrice : true;

                return typeMatch && priceMatch;
            });

            displayFacilities(filteredFacilities);
        });

        // Initial display of all facilities
        displayFacilities(facilities);
    </script>
</body>
</html>
